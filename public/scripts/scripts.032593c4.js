"use strict";angular.module("flightFinder",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","autocomplete","angular-loading-bar"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"FlightCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]).config(["cfpLoadingBarProvider",function(a){a.includeSpinner=!1}]),angular.module("flightFinder").factory("CitiesService",["$http","$q",function(a,b){return{getCities:function(){var c=b.defer();return a.get("/routes/cities").success(function(a){c.resolve(a)}),c.promise},getCandidates:function(a,b){return b&&b.length>=3?a.filter(function(a){return a.toLowerCase().startsWith(b.toLowerCase())}):[]}}}]),angular.module("flightFinder").factory("RoutesService",["$http","$q",function(a,b){return{find:function(c){var d=b.defer();return a.post("/routes/find",c).success(function(a){d.resolve(a)}).error(function(){d.resolve({data:{error:"Oops! Something went wrong."}})}),d.promise}}}]),angular.module("flightFinder").controller("FlightCtrl",["$scope","$rootScope","$http","CitiesService","RoutesService",function(a,b,c,d,e){a.route={from:"",to:""},a.candidateCities=[];var f=[];d.getCities().then(function(b){a.citiesRetrieved=!0,f=b.cities}),a.getCandidateCity=function(b){a.candidateCities=d.getCandidates(f,b)},a.findFlights=function(){a.airlines=[],delete a.error,a.onRequest=!0,e.find(a.route).then(function(b){b.airlines?a.airlines=b.airlines:a.error=b.error,a.onRequest=!1})}}]),angular.module("flightFinder").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<h2>Flight Finder</h2> <p>Select your origin and destination to check for for airlines with flights on that route.</p> <form ng-disabled="true" ng-submit="findFlights()" class="search-form" ng-show="citiesRetrieved"> <fieldset ng-disabled="onRequest"> <div class="form-group"> <autocomplete ng-model="route.from" focus attr-placeholder="From" on-type="getCandidateCity" data="candidateCities" auto-select="true" autocomplete-required> </autocomplete> </div> <div class="form-group"> <autocomplete ng-model="route.to" attr-placeholder="To" on-type="getCandidateCity" data="candidateCities" auto-select="true" autocomplete-required> </autocomplete> </div> <input ng-disabled="!route.from || !route.to" type="submit" value="Submit" class="btn btn-success btn-block"> </fieldset> </form> <div class="col-md-12 no-side-padding"> <div class="list-group" ng-show="airlines && airlines.length > 0"> <div class="list-group-item active text-center"> Available Flights </div> <div class="list-group-item" ng-repeat="airline in airlines"> {{airline}} </div> </div> <div class="alert alert-danger alert-dismissible" role="alert" ng-show="error"> <strong>{{error}}. </strong></div> </div>')}]);